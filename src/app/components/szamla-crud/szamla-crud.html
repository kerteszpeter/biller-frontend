<h2>Számlák kezelése</h2>

<div style="display: flex; gap: 20px;">
  <div style="flex: 1;">
    <h3>Új számla létrehozása</h3>
    <form (ngSubmit)="createSzamla()">
      <div>
        <label>Tárgy:</label>
        <input type="text" [(ngModel)]="createForm.targy" name="createTargy" required>
      </div>
      <div>
        <label>Összeg:</label>
        <input type="text" [(ngModel)]="createForm.osszeg" name="createOsszeg" required>
      </div>
      <div>
        <label>Fizetési határidő:</label>
        <input type="text" [(ngModel)]="createForm.fizhat" name="createFizhat" required>
      </div>
      <div>
        <label>Cég:</label>
        <select [(ngModel)]="createForm.cegId" name="createCegId" required>
          <option value="0">Válasszon céget</option>
          <option *ngFor="let ceg of cegek" [value]="ceg.id">{{ ceg.nev }}</option>
        </select>
      </div>
      <div>
        <label>
          <input type="checkbox" [(ngModel)]="createForm.fizetve" name="createFizetve">
          Fizetve
        </label>
      </div>
      <button type="submit">Létrehozás</button>
      <button type="button" (click)="resetCreateForm()">Törlés</button>
    </form>
  </div>

  <div style="flex: 1;">
    <h3>Számla szerkesztése</h3>
    <div>
      <label>Számla ID:</label>
      <input type="number" #idInput (keyup.enter)="loadSzamlaForEdit(+(idInput.value))">
      <button (click)="loadSzamlaForEdit(+(idInput.value))">Betöltés</button>
    </div>
    <form (ngSubmit)="updateSzamla()" *ngIf="editId">
      <div>
        <label>Tárgy:</label>
        <input type="text" [(ngModel)]="editForm.targy" name="editTargy" required>
      </div>
      <div>
        <label>Összeg:</label>
        <input type="text" [(ngModel)]="editForm.osszeg" name="editOsszeg" required>
      </div>
      <div>
        <label>Fizetési határidő:</label>
        <input type="text" [(ngModel)]="editForm.fizhat" name="editFizhat" required>
      </div>
      <div>
        <label>Cég:</label>
        <select [(ngModel)]="editForm.cegId" name="editCegId" required>
          <option value="0">Válasszon céget</option>
          <option *ngFor="let ceg of cegek" [value]="ceg.id">{{ ceg.nev }}</option>
        </select>
      </div>
      <div>
        <label>
          <input type="checkbox" [(ngModel)]="editForm.fizetve" name="editFizetve">
          Fizetve
        </label>
      </div>
      <button type="submit">Mentés</button>
      <button type="button" (click)="resetEditForm()">Mégse</button>
    </form>
  </div>
</div>

<h3>Számlák listája</h3>
<table border="1">
  <tr>
    <th>ID</th>
    <th>Tárgy</th>
    <th>Összeg</th>
    <th>Cég</th>
    <th>Fizetési határidő</th>
    <th>Fizetve</th>
    <th>Műveletek</th>
  </tr>
  <tr *ngFor="let szamla of szamlak">
    <td>{{ szamla.id }}</td>
    <td>{{ szamla.targy }}</td>
    <td>{{ szamla.osszeg }}</td>
    <td>{{ szamla.cegNev }}</td>
    <td>{{ szamla.fizhat }}</td>
    <td>{{ szamla.fizetve ? 'igen' : 'nem' }}</td>
    <td>
      <button (click)="selectSzamlaForEdit(szamla)">Szerkesztés</button>
      <button (click)="deleteSzamla(szamla.id!)">Törlés</button>
    </td>
  </tr>
</table>

